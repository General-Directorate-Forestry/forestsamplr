---
title: "Forest Sampling"
author: "Karin Wolken"
date: "2017-07-07"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{forestSampling}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---


# Forest Sampling Package   
  
The Forest Sampling is a package of functions that calculates workups for sampling designs commonly used in Forestry. It is an open source opportunity for collaboration and transparency.  
  
These sampling designs include:
* Simple Random Sampling  
* Cluster Sampling  
* Stratified Sampling  
* Systematic Sampling  
* Two-Stage Sampling  

Variations are included, described in detail [here](insertLinkTo#Functions).  
  
# General Information
  
* All functions require data input. For most functions, this data must be a dataframe formatted in the generalized structure. Select functions can act on vectors (`summarize_simple_random` and `summarize_systematic`).  
* In most cases, additional parameters are necessary. Defaults have been provided to help minimize this.  
  
## Common parameters, detailed:  
* `attribute`: assumes target attribute is called `attr`. Set `attribute` to the column header used for the variable of interest. Not required for vector input.  
* `___Tot`: total number of the ___ unit in the sampling design. Commonly the total number of clusters or plots in the sampling frame.  
* `desiredConfidence`: Percent confidence level (two-sided) expressed as decimal. Default is set to `0.95`.  

# Functions:  
The following are the basic functions and their associated sampling strategy.  

  Function                           | Sampling Strategy
-------------------------------------|---------------------------------------------------------
`summarize_cluster()`                | cluster sampling  
`summarize_cluster_discrete()`       | cluster sampling with Bernoulli distribution  
`summarize_simple_random()`          | simple random sampling  
`summarize_simple_random_discrete()` | simple random sampling with the Bernoulli distribution  
`summarize_stratified()`             | stratified sampling  
`summarize_systematic()`             | systematic sampling  
`summarize_two_stage()`              | two-stage sampling  
  
## Cluster Sample:  

### Normal Distribution:

Function Definition:
```{r include = FALSE}
summarize_cluster(data, plot = TRUE, attribute = NA)
```

summarize_cluster() can take in plot data or stand data.  
  
```{r include = FALSE}
plotLevelDataExample <- data.frame(clusterID = c(1, 1, 1, 1, 1, 2, 2, 3, 4, 4, 4, 4, 4, 4,
                                                 5, 5, 5, 5, 5), 
                                   attr = c(1000, 1250, 950, 900, 1005, 1000, 1250, 950,
                                            900, 1005, 1000, 1250, 950, 900, 1005, 1000,
                                            1250, 950, 900), 
                                   isUsed = c(T, T, T, T, T, T, T, T, T, T, T, T, T, T, F,
                                              F, F, F, F))
```

```{r include = FALSE}
clusterLevelDataExample <- data.frame(clusterID = c(1, 2, 3, 4, 5), 
                                     clusterElements = c(4, 2, 9, 4, 10), 
                                     sumAttr = c(1000, 1250, 950, 900, 1005), 
                                     isUsed = c(T, T, F, T, T))
```
  
### Bernoulli Distribution  

Function Definition:
```{r include = FALSE}
summarize_cluster_discrete(data, attribute, plotTot = NA, desiredConfidence = 0.95)
```

The cluster sample has an option for the Bernoulli distribution. For this distribution, the total number of plots in the sampling frame must be indicated, and data must be input as follows (where attr is the value of the attribute for each plot):  

```{r include = FALSE}
dataPlot <- data.frame(clusterID = c(1, 1, 1, 1, 1, 2, 2, 3, 4, 4, 4, 4, 4, 4, 5, 5, 5,
                                     5, 5),
                       attr = c(1000, 1250, 950, 900, 1005, 1000, 1250, 950, 900, 1005,
                                1000, 1250, 950, 900, 1005, 1000, 1250, 950, 900), 
                       isUsed = c(T, T, T, T, T, T, T, T, T, T, T, T, T, T, F, F, F, F, F))
```

## Simple Random Sample  

Function Definition:  
```{r include = FALSE}
summarize_simple_random(data, attribute = 'attr', type = 'vector', popSize = NA, desiredConfidence = 0.9, infiniteReplacement = F)

summarize_simple_random_discrete(data, attribute = 'attr', popTot = NA)
```

Simple random sample (SRS) has 3 options:  
1. SRS of a finite population or sampled without replacement
    * Set `infiniteReplacement = FALSE` or do not include the parameter in the function call
    * Data input can be as a vector or dataframe  
2. SRS of an infinite population or sampled wiht replacement
    * Set `infiniteReplacement = TRUE`
    * Data input can be as a vector or dataframe  
3. SRS with a bernoulli distribution
    * TBD: Set `bernoulli = TRUE`
    * Currently, data input can only be as a dataframe
  
Data inputs:  
  1. Vector  

```{r include = FALSE}
data <- c(120, 140, 160, 110, 100, 90)
type <- 'vector'
```
  
Example: `summarize_simple_random(data, type, popSize = 50)`  
  
  2. Dataframe

```{r include = FALSE}
data <- data.frame(bapa = c(120, 140, 160, 110, 100, 90), plots = c(1, 2, 3, 4, 5, 6))
attribute <- 'bapa'
type <- 'dataframe'
```

Example: `summarize_simple_random(data, attribute, type, popSize = 50)`

  3. For Bernoulli Distribution  
  
```{r include = FALSE}
data <- data.frame(alive = c(T, T, F, T, F, F), plots = c(1, 2, 3, 4, 5, 6))
attribute <- 'alive'
```

Example: `summarize_simple_random_discrete(data, attribute, popTot = 50)`  
  
## Stratified Sample:

Function Definition:
```{r include = FALSE}
summarize_stratified(trainingData, attribute, stratumTab, desiredConfidence = 0.9, post = T)
```

Stratified sample currently has two options:
1. Stratified  
    * Set `post = FALSE`  
2. Post-Stratified  
    * Set `post = TRUE`  
  

## Systematic Sample:  

Function Definition:
```{r include = FALSE}
summarize_systematic(data, attribute = 'attr', type = 'vector', popSize = NA, desiredConfidence = 0.9)  
```

Data input can be either as a vector or dataframe.  

```{r include = FALSE}
dataframe <- data.frame(bapa = c(120, 140, 160, 110, 100, 90), plots = c(1, 2, 3, 4, 5, 6))
attribute <- 'bapa'
type <- 'dataframe'
```

```{r include = FALSE}
vector <- c(120, 140, 160, 110, 100, 90)
```

## Two-Stage Sample:  

Function Definition:
```{r include = FALSE}
summarize_two_stage(data, plot = TRUE, attribute = NA, populationClusters = 0, populationElementsPerCluster = 0)  
```

Input data can be either by plot (`plot = TRUE`) or the total sum of the attribute for each cluster (`plot = FALSE`).  

```{r include = FALSE}
data = data.frame(clusterID = c(1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6, 6, 6), volume = c(500, 650, 610, 490, 475, 505, 940, 825, 915, 210, 185, 170, 450, 300, 500, 960, 975, 890), isUsed = c(T, T, T, T, T, T, T, T, T, T, T, T, T, T, T, T, T, T))
```

Example: `summarize_two_stage(redData, T, 'volume', populationClusters = 16, populationElementsPerCluster = 160)`  
  
The ‘attribute’ function argument must be included.  
  






